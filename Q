<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tự chế 2 - Công cụ Cắt Ván MDF</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { background-color: #f8fafc; font-family: sans-serif; }
        /* Custom scrollbar for cleaner look */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const IconCalculator = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
        );
        const IconRuler = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"/><path d="m14.5 12.5 2-2"/><path d="m11.5 9.5 2-2"/><path d="m8.5 6.5 2-2"/><path d="m17.5 15.5 2-2"/></svg>
        );
        const IconLayoutGrid = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>
        );
        const IconBox = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
        );
        const IconSettings2 = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>
        );
        const IconRotateCw = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
        );
        const IconRefreshCcw = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
        );
        const IconArrowRightLeft = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m16 21 5-5-5-5"/><path d="M21 16H3"/><path d="m8 3-5 5 5 5"/><path d="M3 8h18"/></svg>
        );
        const IconPackage = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m16.5 9.4-9-5.19"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
        );


        const translations = {
            vi: {
                title: "Tự chế 2 - Công cụ tính số lượng máy cắt vi tính",
                subtitle: "Công cụ được Tự chế 2 thiết kế",
                boardHeader: "VÁN NGUYÊN LIỆU",
                reset: "Làm mới",
                length: "DÀI (MM)",
                width: "RỘNG (MM)",
                boardQty: "SỐ LƯỢNG VÁN CÓ (TẤM)",
                bladeThickness: "MẠCH CƯA (MM)",
                singleHeader: "THÔNG TIN SẢN PHẨM",
                prodCode: "Mã sản phẩm",
                prodLength: "Dài",
                prodWidth: "Rộng",
                yieldBoard: "Sản lượng / 1 Tấm",
                totalBatch: "Tổng Lô",
                waste: "% Dư thừa",
                ready: "Sẵn sàng tính toán",
                confirmReset: "Làm mới toàn bộ dữ liệu?",
                placeholderCode: "Mã...",
                placeholderZero: "0",
                blackBoard: "Tấm Đen (2440x1220)",
                yellowBoard: "Tấm Vàng (2465x1245)",
                modeForward: "Tính số lượng (Đơn)",
                modeReverse: "Tính tấm nguyên bản",
                targetQty: "Số lượng", 
                excess: "Dư ra",
                resultReverseHeader: "KẾT QUẢ TÍNH TẤM NGUYÊN BẢN",
                visualMap: "SƠ ĐỒ CẮT MÔ PHỎNG",
            },
            zh: {
                title: "自制二 - 电脑切割数量计算工具",
                subtitle: "由自制二设计",
                boardHeader: "原材料板",
                reset: "重置",
                length: "长 (MM)",
                width: "宽 (MM)",
                boardQty: "现有板材数量 (张)",
                bladeThickness: "锯路厚度 (MM)",
                singleHeader: "产品信息",
                prodCode: "产品代码",
                prodLength: "长",
                prodWidth: "宽",
                yieldBoard: "产量 / 1 张板",
                totalBatch: "总批次",
                waste: "废料百分比",
                ready: "准备计算",
                confirmReset: "确定要重置所有数据吗？",
                placeholderCode: "代码...",
                placeholderZero: "0",
                blackBoard: "黑板 (2440x1220)",
                yellowBoard: "黄板 (2465x1245)",
                modeForward: "计算数量 (单)",
                modeReverse: "计算原板",
                targetQty: "数量", 
                excess: "多余产品",
                resultReverseHeader: "原板计算结果",
                visualMap: "切割模拟图",
            }
        };

        const MDFCuttingCalculator = () => {
            const [lang, setLang] = useState('vi');
            const t = translations[lang];
            
            const [mode, setMode] = useState('forward');

            // Input states
            const [boardType, setBoardType] = useState('black');
            const [boardLength, setBoardLength] = useState(2440);
            const [boardWidth, setBoardWidth] = useState(1220);
            
            // Product Info
            const [productCode, setProductCode] = useState('');
            const [itemLength, setItemLength] = useState('');
            const [itemWidth, setItemWidth] = useState('');
            
            // Quantities
            const [boardQuantity, setBoardQuantity] = useState(''); 
            const [targetQuantity, setTargetQuantity] = useState(''); 

            const [bladeThickness, setBladeThickness] = useState(4.4);

            // Result state
            const [result, setResult] = useState(null);

            // Helpers
            const handleNumChange = (val) => val === '' ? '' : Number(val);

            const handleBoardTypeChange = (e) => {
                const type = e.target.value;
                setBoardType(type);
                if (type === 'black') {
                    setBoardLength(2440);
                    setBoardWidth(1220);
                } else if (type === 'yellow') {
                    setBoardLength(2465);
                    setBoardWidth(1245);
                }
            };

            const handleDimensionChange = (type, value) => {
                setBoardType('custom');
                const numValue = handleNumChange(value);
                if (type === 'length') setBoardLength(numValue);
                if (type === 'width') setBoardWidth(numValue);
            };

            const resetProductInfo = () => {
                setProductCode('');
                setItemLength('');
                setItemWidth('');
            };

            const resetToDefaults = () => {
                if (window.confirm(t.confirmReset)) {
                    setBoardType('black');
                    setBoardLength(2440);
                    setBoardWidth(1220);
                    setProductCode('');
                    setItemLength('');
                    setItemWidth('');
                    setBoardQuantity('');
                    setTargetQuantity('');
                    setBladeThickness(4.4);
                    setResult(null);
                }
            };

            // Main Calculation
            const calculate = () => {
                const bL = Number(boardLength);
                const bW = Number(boardWidth);
                const iL = Number(itemLength);
                const iW = Number(itemWidth);
                
                if (bL <= 0 || bW <= 0 || iL <= 0 || iW <= 0) {
                    setResult(null); return;
                }

                const calcOrientation = (L, W, itemL, itemW, k) => {
                    if (itemL <= 0 || itemW <= 0) return { count: 0, cols: 0, rows: 0 };
                    const countL = Math.floor((L + k) / (itemL + k));
                    const countW = Math.floor((W + k) / (itemW + k));
                    return { count: countL * countW, cols: countL, rows: countW };
                };

                const opt1 = calcOrientation(bL, bW, iL, iW, bladeThickness);
                const opt2 = calcOrientation(bL, bW, iW, iL, bladeThickness);
                
                let bestOpt = opt1.count >= opt2.count ? { ...opt1, rotated: false } : { ...opt2, rotated: true };
                
                const pieceL = bestOpt.rotated ? iW : iL;
                const pieceW = bestOpt.rotated ? iL : iW;
                const usedArea = bestOpt.count * (iL * iW);
                const totalArea = bL * bW;
                const wastePercentage = totalArea > 0 ? (100 - ((usedArea / totalArea) * 100)) : 0;

                if (mode === 'forward') {
                    const bQ = Number(boardQuantity) || 0; 
                    setResult({
                        mode: 'forward',
                        piecesPerBoard: bestOpt.count,
                        totalPieces: bestOpt.count * bQ,
                        wastePercentage: wastePercentage.toFixed(2),
                        layout: { ...bestOpt, pieceL, pieceW }
                    });
                } else {
                    const tQ = Number(targetQuantity);
                    if (tQ > 0 && bestOpt.count > 0) {
                        const boardsNeeded = Math.ceil(tQ / bestOpt.count);
                        const totalProduced = boardsNeeded * bestOpt.count;
                        const excess = totalProduced - tQ;
                        setResult({
                            mode: 'reverse',
                            piecesPerBoard: bestOpt.count,
                            boardsNeeded: boardsNeeded,
                            totalProduced: totalProduced,
                            excess: excess,
                            wastePercentage: wastePercentage.toFixed(2),
                            layout: { ...bestOpt, pieceL, pieceW }
                        });
                    } else {
                        setResult(null); 
                    }
                }
            };

            useEffect(() => {
                calculate();
            }, [boardLength, boardWidth, itemLength, itemWidth, boardQuantity, targetQuantity, bladeThickness, mode]);

            const renderVisual = () => {
                if (!result || mode !== 'forward') return null;
                const containerWidth = window.innerWidth < 768 ? 280 : 400;
                const bL = Number(boardLength);
                const bW = Number(boardWidth);
                const scale = Math.min(containerWidth / bL, containerWidth / bW); 
                const svgW = bL * scale;
                const svgH = bW * scale;
                const itemW_Scaled = result.layout.pieceL * scale;
                const itemH_Scaled = result.layout.pieceW * scale;
                const kerfScaled = bladeThickness * scale;

                const rects = [];
                for (let i = 0; i < result.layout.cols; i++) {
                    for (let j = 0; j < result.layout.rows; j++) {
                        const x = i * (itemW_Scaled + kerfScaled);
                        const y = j * (itemH_Scaled + kerfScaled);
                        
                        const fontSize = Math.min(10, Math.min(itemW_Scaled, itemH_Scaled) / 4);
                        const showText = itemW_Scaled > 20 && itemH_Scaled > 15;

                        rects.push(
                            <g key={`${i}-${j}`}>
                                <rect x={x} y={y} width={itemW_Scaled} height={itemH_Scaled} fill="#facc15" stroke="#a16207" strokeWidth="1" className="hover:opacity-90" />
                                {showText && (
                                    <text x={x + itemW_Scaled / 2} y={y + itemH_Scaled / 2} textAnchor="middle" dominantBaseline="middle" fill="#713f12" fontSize={fontSize} fontWeight="bold" style={{ pointerEvents: 'none' }}>
                                        {result.layout.pieceL}x{result.layout.pieceW}
                                    </text>
                                )}
                            </g>
                        );
                    }
                }

                return (
                    <div className="flex justify-center my-4 overflow-hidden border border-gray-300 bg-gray-50 rounded p-4 relative">
                        <svg width={svgW} height={svgH} className="shadow-lg bg-white">
                            <rect width="100%" height="100%" fill="#ef4444" />
                            {rects}
                        </svg>
                        <div className="absolute bottom-2 right-2 text-xs text-white font-mono bg-black/50 px-2 py-1 rounded">{boardLength}mm x {boardWidth}mm</div>
                    </div>
                );
            };

            return (
                <div className="w-full max-w-4xl mx-auto p-2 sm:p-4 bg-slate-50 min-h-screen font-sans text-slate-800">
                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        {/* Header */}
                        <div className="bg-slate-800 p-4 sm:p-6 text-white flex flex-col gap-4">
                            <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2">
                                <div>
                                    <h1 className="text-xl sm:text-2xl font-bold flex items-center gap-2"><IconCalculator className="w-5 h-5 sm:w-6 sm:h-6" /> {t.title}</h1>
                                    <p className="text-slate-300 text-xs sm:text-sm mt-1">{t.subtitle}</p>
                                </div>
                                <div className="flex gap-1 bg-slate-700 p-1 rounded">
                                    <button onClick={() => setLang('vi')} className={`px-2 py-1 rounded text-xs font-bold ${lang === 'vi' ? 'bg-white text-slate-900' : 'text-slate-400'}`}>VN</button>
                                    <button onClick={() => setLang('zh')} className={`px-2 py-1 rounded text-xs font-bold ${lang === 'zh' ? 'bg-white text-slate-900' : 'text-slate-400'}`}>CN</button>
                                </div>
                            </div>

                            <div className="flex p-1 bg-slate-700 rounded-lg">
                                <button onClick={() => setMode('forward')} className={`flex-1 py-2 text-xs sm:text-sm font-bold rounded-md transition-all flex items-center justify-center gap-2 ${mode === 'forward' ? 'bg-white text-slate-800 shadow' : 'text-slate-400 hover:text-white'}`}>
                                    <IconLayoutGrid className="w-4 h-4" /> {t.modeForward}
                                </button>
                                <button onClick={() => setMode('reverse')} className={`flex-1 py-2 text-xs sm:text-sm font-bold rounded-md transition-all flex items-center justify-center gap-2 ${mode === 'reverse' ? 'bg-blue-600 text-white shadow' : 'text-slate-400 hover:text-white'}`}>
                                    <IconArrowRightLeft className="w-4 h-4" /> {t.modeReverse}
                                </button>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="flex flex-col md:grid md:grid-cols-12 gap-0">
                            
                            {/* Input */}
                            <div className="w-full md:col-span-5 p-4 sm:p-6 border-b md:border-b-0 md:border-r border-slate-100 space-y-6">
                                <div className="space-y-4">
                                    <div className="flex items-center justify-between">
                                        <h3 className="font-semibold text-slate-700 flex items-center gap-2"><IconRuler className="w-4 h-4 text-green-600" /> {t.boardHeader}</h3>
                                        <button onClick={resetToDefaults} className="text-xs text-slate-400 hover:text-red-600 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded transition-colors"><IconRefreshCcw className="w-3 h-3" /> Reset</button>
                                    </div>
                                    <div>
                                        <select value={boardType} onChange={handleBoardTypeChange} className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none bg-white font-medium text-slate-700">
                                            <option value="black">{t.blackBoard}</option>
                                            <option value="yellow">{t.yellowBoard}</option>
                                            <option value="custom">Tùy chọn kích thước...</option>
                                        </select>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">{t.length}</label><input type="number" value={boardLength} onChange={(e) => handleDimensionChange('length', e.target.value)} className={`w-full px-3 py-2 border rounded-md ${boardType !== 'custom' ? 'bg-slate-100 text-slate-500' : 'bg-white'}`} /></div>
                                        <div><label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">{t.width}</label><input type="number" value={boardWidth} onChange={(e) => handleDimensionChange('width', e.target.value)} className={`w-full px-3 py-2 border rounded-md ${boardType !== 'custom' ? 'bg-slate-100 text-slate-500' : 'bg-white'}`} /></div>
                                    </div>
                                    <div><label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">{t.bladeThickness}</label><input type="number" step="0.1" value={bladeThickness} onChange={(e) => setBladeThickness(handleNumChange(e.target.value))} className="w-full px-3 py-2 border border-slate-300 rounded-md text-sm" placeholder="0" /></div>
                                </div>

                                <hr className="border-slate-100" />
                                
                                <div className="space-y-4">
                                    <div className="flex items-center justify-between">
                                        <h3 className="font-semibold text-slate-700 flex items-center gap-2"><IconBox className="w-4 h-4 text-blue-600" /> {t.singleHeader}</h3>
                                        <button onClick={resetProductInfo} className="text-xs text-slate-400 hover:text-blue-600 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded transition-colors"><IconRefreshCcw className="w-3 h-3" /> Reset SP</button>
                                    </div>
                                    <div><input type="text" value={productCode} onChange={(e) => setProductCode(e.target.value)} className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none uppercase" placeholder={t.placeholderCode} /></div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">{t.length}</label><input type="number" value={itemLength} onChange={(e) => setItemLength(handleNumChange(e.target.value))} className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="0" /></div>
                                        <div><label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">{t.width}</label><input type="number" value={itemWidth} onChange={(e) => setItemWidth(handleNumChange(e.target.value))} className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="0" /></div>
                                    </div>
                                </div>

                                <hr className="border-slate-100" />

                                <div className="space-y-4">
                                    {mode === 'forward' ? (
                                        <div>
                                            <label className="text-xs font-bold text-slate-700 uppercase block mb-1">{t.boardQty}</label>
                                            <div className="relative">
                                                <input type="number" value={boardQuantity} onChange={(e) => setBoardQuantity(handleNumChange(e.target.value))} className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none pl-10" placeholder="0" />
                                                <div className="absolute left-3 top-2.5 text-slate-400 text-sm">SL:</div>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="bg-blue-50 p-3 rounded-lg border border-blue-100">
                                            <label className="text-xs font-bold text-blue-700 uppercase block mb-1">{t.targetQty}</label>
                                            <div className="relative">
                                                <input type="number" value={targetQuantity} onChange={(e) => setTargetQuantity(handleNumChange(e.target.value))} className="w-full px-3 py-2 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none pl-10 text-blue-700 font-bold" placeholder="0" />
                                                <div className="absolute left-3 top-2.5 text-blue-400 text-sm"><IconPackage className="w-4 h-4"/></div>
                                            </div>
                                        </div>
                                    )}
                                </div>

                            </div>

                            {/* Result */}
                            <div className="w-full md:col-span-7 bg-slate-50 p-4 sm:p-6 flex flex-col">
                                {result ? (
                                    <div className="space-y-6 flex-1 animate-in fade-in slide-in-from-bottom-2">
                                        {result.mode === 'reverse' && (
                                            <div className="flex flex-col gap-4 justify-center h-full">
                                                <div className="bg-blue-600 text-white p-8 rounded-xl shadow-lg text-center transform transition-transform hover:scale-105">
                                                    <p className="text-6xl font-black">{result.boardsNeeded.toLocaleString()}</p>
                                                    <p className="text-sm mt-2 opacity-75">Tấm nguyên bản</p>
                                                </div>
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div className="bg-white border border-slate-200 p-4 rounded-lg text-center shadow-sm">
                                                        <p className="text-[10px] text-slate-400 font-bold uppercase mb-1">{t.yieldBoard}</p>
                                                        <p className="text-2xl font-bold text-slate-700">{result.piecesPerBoard}</p>
                                                    </div>
                                                    <div className="bg-white border border-slate-200 p-4 rounded-lg text-center shadow-sm">
                                                        <p className="text-[10px] text-orange-500 font-bold uppercase mb-1">{t.excess}</p>
                                                        <p className="text-2xl font-bold text-orange-600">+{result.excess}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {result.mode === 'forward' && (
                                        <>
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                            <div className="flex justify-between items-center mb-2">
                                                <span className="text-xs font-bold text-slate-400 uppercase">{t.visualMap}</span>
                                                {result.layout.rotated && <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded flex items-center gap-1"><IconRotateCw className="w-3 h-3" /> Đã xoay chiều</span>}
                                            </div>
                                            {renderVisual()}
                                            <p className="text-center text-sm text-slate-500 italic mt-2">Lưới: {result.layout.cols} cột x {result.layout.rows} hàng</p>
                                            </div>

                                            <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                                <p className="text-sm text-slate-500 mb-1">{t.yieldBoard}</p>
                                                <p className="text-3xl font-bold text-blue-600">{result.piecesPerBoard.toLocaleString()}</p>
                                                <p className="text-xs text-slate-400 mt-1">chiếc</p>
                                            </div>
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm border-l-4 border-l-green-500">
                                                <p className="text-sm text-slate-500 mb-1">{t.totalBatch}</p>
                                                <p className="text-3xl font-bold text-green-600">{result.totalPieces.toLocaleString()}</p>
                                                <p className="text-xs text-slate-400 mt-1">chiếc {productCode ? `(${productCode})` : ''}</p>
                                            </div>
                                            </div>
                                            
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col justify-center">
                                                <p className="text-sm font-medium text-slate-500 mb-1">{t.waste}</p>
                                                <p className="text-xl font-bold text-red-500">{result.wastePercentage}%</p>
                                            </div>
                                        </>
                                        )}
                                    </div>
                                ) : (
                                    <div className="flex flex-col items-center justify-center h-48 sm:h-full text-slate-400 py-8 sm:py-12 border-2 border-dashed border-slate-200 rounded-lg">
                                        <IconCalculator className="w-12 h-12 sm:w-16 sm:h-16 mb-4 opacity-20" />
                                        <p className="text-sm sm:text-lg font-medium">{t.ready}</p>
                                        <p className="text-xs sm:text-sm text-slate-400 mt-1">Nhập thông tin sản phẩm để bắt đầu</p>
                                    </div>
                                )}
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MDFCuttingCalculator />);
    </script>
</body>
</html>
